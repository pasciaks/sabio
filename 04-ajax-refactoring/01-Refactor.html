<!DOCTYPE html>
<html lang="en">

<head>
    <!-- #region Sabio Code - You can Fold this region to remove it from sight -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Sabio Coding Bootcamp" />
    <meta itemprop="image" content="https://sabio.la/Sabio.png">
    <link rel="shortcut icon" href="https://sabio.la/Sabio.png">
    <link rel="icon" type="image/png" href="https://sabio.la/Sabio.png" />
    <!-- Do Not Change the HTML title or anything between this line and the line with the 💘's -->
    <title> Execise Template</title>
    <link href="https://pw.sabio.la/dist/all-site.css" rel="stylesheet" />
    
    <script src="https://pw.sabio.la/api/js/site"></script>
    <script src="service.js"></script>

    <!-- #endregion -->
    <!-- I 💘 Code, You 💘 Code, We all 💘 Code -->

    <!-- 💡 All your CSS in here -->
    <style>

    </style>
</head>

<body class="sabio" data-ins="pw-00" data-ins-css="false" data-ui="full-height">
    <!-- Do Not Edit or Remove this nav element -->
    <nav class="do-not-remove navbar navbar-expand-md navbar-dark bg-dark sabio"></nav>

    <div class="container main align-content-center text-center">
        <H1>Ajax Refactoring</H1>
        <p>Run out of Command Line</p>
        <div class="row">
            <div class="col-6 offset-3">
                <ul class="list-group text-left py-2">
                    <li class="list-group-item">
                        Remove call back function parameters from function that makes the actual ajax call.
                    </li>
                    <li class="list-group-item">
                        Add a <code>return</code> statement to the end of the function that makes the actual ajax call
                    </li>
                    <li class="list-group-item">
                        Implement your <mark>success handler</mark> by passing it to a call the <code>.then</code>
                        function
                    </li>
                    <li class="list-group-item">
                        Implement your <mark>error handler</mark> by passing it to a call the <code>.fail</code>
                        or <code>.catch</code>
                        function
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Do Not Edit or Remove this footer element -->
    <footer class="do-not-remove container-fluid footer mx-auto  fb-targert sabio">
        <p class="text-center">© Sabio.la 2019</p>
    </footer>

    <!--👇🏻 All your JavaScript code goes below here inside this script tag 👇🏻 -->
    <script id="candidateCode">

        function startUp()
        {
            console.log("startUp");
            getAllAuthors();
            addAnAuthor()
        }

        var getAllAuthors = () =>
        {
            console.log("getAllAuthors");
            // services.authors.getAll(onGetSuccess, onGetError)
            services.authors
                .getAllV2()
                .then(onGetSuccess)
                .fail(onGetError)

        }

        var addAnAuthor = () =>
        {
            console.log("addAnAuthor");
            var payload = { firstName: "Gregorio", lastName: "Rojas", age: 30, salary: 100000 };

            //services.authors.add(payload, onAuthAddSuccess, onAuthAddError)
            services.authors.addV2(payload)
                .then(onAuthAddSuccess)
                .fail(onAuthAddError);
        }

        var onGetSuccess = data =>
        {
            console.log("onGetSuccess", data);
        }

        var onGetError = err =>
        {
            console.log(err);
        }

        var onAuthAddSuccess = data =>
        {
            console.log("onAuthAddSuccess", data);
            console.log(data);
        }

        var onAuthAddError = err =>
        {
            console.log("onAuthAddError", data);
            console.log(err);
        }

    </script>
    <!-- 🛑 Do Not Write Any Code Below here -->
</body>

</html>
