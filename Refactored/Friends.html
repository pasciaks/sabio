<!DOCTYPE html>
<html lang="en">

<head>

    <title>FRIENDS-C93 Starter Vanilla JS</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Sabio Coding Bootcamp" />
    <meta itemprop="image" content="https://sabio.la/Sabio.png">
    <link rel="shortcut icon" href="https://sabio.la/Sabio.png">
    <link rel="icon" type="image/png" href="https://sabio.la/Sabio.png" />
    <script src="https://pw.sabio.la/api/js/site"></script>
    <link href="https://pw.sabio.la/dist/all-site.css" rel="stylesheet" />
    <link href="./css/toastr.css" rel="stylesheet" />
    <script src="./js/tests.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.1.0/uuidv4.min.js"></script>
    <script src="./js/utilities.js"></script>
    <script src="https://unpkg.com/axios@0.19.2/dist/axios.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="./js/toastr.min.js"></script>

    <!-- Import my javascript services code -->

    <script src="./js/services/authService.js"></script>
    <script src="./js/services/blogsService.js"></script>
    <script src="./js/services/emailsService.js"></script>
    <script src="./js/services/eventsService.js"></script>
    <script src="./js/services/filesService.js"></script>
    <script src="./js/services/friendsService.js"></script>
    <script src="./js/services/jobsService.js"></script>
    <script src="./js/services/teamsService.js"></script>
    <script src="./js/services/techcompaniesService.js"></script>

    <!-- ðŸ’¡ All your CSS in here -->

    <link href="./css/main.css" rel="stylesheet" />

</head>

<body>

    <nav class="do-not-remove navbar navbar-expand-md navbar-dark bg-dark sabio d-none"></nav>

    <div w3-include-html="./includes/nav.html"></div>

    <div id="debugInfo"></div>

    <script>
        var services = {
            authService: authService,
            blogsService: blogsService,
            emailsService: emailsService,
            eventsService: eventsService,
            filesService: filesService,
            friendsService: friendsService,
            jobsService: jobsService,
            teamsService: teamsService,
            techcompaniesService: techcompaniesService
        }

        function startUp() {

            wireUpEvents();

            includeHTML(); // Note - this will run on every page, better served with react components/views/routing

            testFriends();

        }

        function wireUpEvents() {

        }

        function testFriends() {

            var exampleFriend = {
                "id": 6211,
                "bio": "Updated Bio",
                "title": "Updated test",
                "summary": "Updated Summary",
                "headline": "Updated Headline",
                "entityTypeId": 1,
                "statusId": "Active",
                "slug": "1238675209",
                "skills": null,
                "primaryImage": {
                    "id": 5401,
                    "entityId": 6211,
                    "imageTypeId": "Main",
                    "imageUrl": "https://api.remotebootcamp.dev/apihelp/rbclogo.png"
                },
                "dateCreated": "2020-10-01T23:54:18.17",
                "dateModified": "2020-10-02T00:03:57.9266667"
            }

            // var uniqueID = uuidv4(); // Date.now();

            // var payload = {
            //     "title": "This is a test",
            //     "bio": "This is the bio",
            //     "summary": "Summary of the friends api record",
            //     "headline": "Now is the time for a headline",
            //     "slug": uniqueID,
            //     "statusId": "NotSet",
            //     "primaryImage": "https://api.remotebootcamp.dev/apihelp/rbclogo.png"
            // }

            // services.friendsService.add(payload)
            //     .then(function(response) {
            //         console.log(response);
            //         $('#debugInfo').append(`<br><hr><br>`);
            //         $('#debugInfo').append(JSON.stringify(response));
            //     })
            //     .catch(function(error) {
            //         console.log(error);
            //         $('#debugInfo').append(`<br><hr><br>`);
            //         $('#debugInfo').append(JSON.stringify(error));
            //     })

            // services.friendsService.get(4976)
            //     .then(function(response) {
            //         console.log(response);
            //         $('#debugInfo').append(`<br><hr><br>`);
            //         $('#debugInfo').append(`<br><hr>Friends get - ${4976} <br><hr>${JSON.stringify(response.data.item)}`);
            //     })
            //     .catch(function(error) {
            //         console.log(error);
            //         $('#debugInfo').append(`<br><hr><br>`);
            //         $('#debugInfo').append(JSON.stringify(error));
            //     })

            services.friendsService.getPageOfFriends(0, 999)
                .then(function(response) {
                    console.log(response.data.item.pagedItems.length + ' Friends found');
                    $('#debugInfo').append(`<br><hr><br>`);
                    $('#debugInfo').append(response.data.item.pagedItems.map(mapFriend))
                })
                .catch(function(error) {
                    console.log(error);
                    $('#debugInfo').append(`<br><hr><br>`);
                    $('#debugInfo').append(JSON.stringify(error));
                })

            services.friendsService.search(0, 999, "%") // NOTE - if there is no search parameter, use normal paging
                .then(function(response) {
                    console.log(response.data.item.pagedItems.length + ' Friends found');
                    $('#debugInfo').append(`<br><hr><br>`);
                    $('#debugInfo').append(response.data.item.pagedItems.map(mapFriend))
                })
                .catch(function(error) {
                    console.log(error);
                    $('#debugInfo').append(`<br><hr><br>`);
                    $('#debugInfo').append(JSON.stringify(error));
                })

            // services.friendsService.delete(6354) //55555
            //     .then(function(response) {
            //         console.log(response);
            //         $('#debugInfo').append(`<br><hr><br>`);
            //         $('#debugInfo').append(JSON.stringify(response));
            //     })
            //     .catch(function(error) {
            //         console.log(error);
            //         $('#debugInfo').append(`<br><hr><br>`);
            //         $('#debugInfo').append(JSON.stringify(error));
            //     })

        }

        function mapFriend(aFriend) {
            return `${JSON.stringify(aFriend)}`;
        }
    </script>

    <!-- Do Not Edit or Remove this footer element -->
    <footer class="do-not-remove container-fluid footer mx-auto  fb-targert sabio d-none">
        <p class="text-center">Â© Sabio.la 2019</p>
    </footer>

    <!-- ðŸ›‘ Do Not Write Any Code Below here -->
</body>

</html>